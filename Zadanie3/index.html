<html>
<head lang="pl">
    <meta charset="UTF-8" />
    <title>Canvas</title>
    <link rel="stylesheet" type="text/css" href="style.css" /> <!-- odnośnik do pliku CSS-->

</head>

<body>

    <div id="container">
        <div id="content"><canvas id="canvas"></canvas></div>
        <div id="platform">Szerokość platformy</div>
        <input type="button" id="bott" onclick="generateBlock()" value="Input Button">
    </div>

    <script type="text/javascript">
        const canvas = document.querySelector('canvas')
        const ctx = canvas.getContext('2d')

        var szer = document.getElementById("content").offsetWidth;
        var wys = document.getElementById("content").offsetHeight;
        var blocks = [],
            drag = false,
            mouseX, mouseY;

        canvas.width = szer;
        canvas.height = wys;

        function generateBlock() 
		{
            color = "rgb(" + Math.floor(Math.random() * 255) + ","
						   + Math.floor(Math.random() * 255) + ","
                           + Math.floor(Math.random() * 255) + ")";
            blocks.push({x: (canvas.width) * 0.85, y: 200, width: 100, height: 100, color: color});
            drawBlocks();
        }

        function drawBlocks() {

            for (var i = 0; i < blocks.length; i++) {
                ctx.fillStyle = blocks[i].color;
                ctx.beginPath();
                ctx.fillRect(blocks[i].x, blocks[i].y, blocks[i].width, blocks[i].height);
            }
        }

        function mouseDown(event) {
            var i, len = blocks.length;
            mouseX = event.clientX;
            mouseY = event.clientY;
            for (i = 0; i < len; i++) {
                if (blocks[i]) {
                    drag = true;
                    dragIndex = i;
                }
            }
            if (drag) {
                window.addEventListener("mousemove", mouseMove, false);
            }
            canvas.removeEventListener("mousedown", mouseDown, false);
            window.addEventListener("mouseup", mouseUp, false);
            return false;
        }

        function mouseMove(event) {
            var minX = 0;
            var maxX = (canvas.width) * 0.8;
            var minY = 0;
            var maxY = canvas.height;

            mouseX = event.clientX;
            mouseY = event.clientY;

            blocks[dragIndex].x = mouseX;
            blocks[dragIndex].y = mouseY;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBlocks();
        }

        function mouseUp() {

        }
        canvas.addEventListener("mousedown", mouseDown, false);
    </script>
</body></html>
